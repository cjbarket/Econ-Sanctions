---
title: "Testing R Packages"
format: html
editor: visual
---

## R Package Demos

```{r message=false, warning=false}
#|: package-installation
# load/install all necessary packages

library(tidyverse) 
library(tidymodels)
library(dplyr)
library(quantmod)
library(tidyquant)
library(alphavantager)
```

All demos should follow the form below.

```{r}
#|: tidyquant-demo

# combines the functionality of many packages, including quantmod, PerformanceAnalytics, zoo, xts, and TTR
# contains data for indexes 
# pkg docs: https://cran.r-project.org/web/packages/tidyquant/tidyquant.pdf

#getting the prices for the iShares MSCI South Africa ETF, which tracks the MSCI South Africa 25/50 Index
eza_prices <- tq_get("EZA", get = "stock.prices")

#getting data for the iShares MSCI Singapore ETF
ews_prices <- tq_get("EWS", get = "stock.prices")

#getting prices for the iShares MSCI Italy ETF
ewi_prices <- tq_get("EWI", get = "stock.prices")

#getting data for the iShares MSCI Qatar ETF
qat_prices <- tq_get("QAT", get = "stock.prices")

#getting data for the iShares MSCI UAE ETF
uae_prices <- tq_get("UAE", get = "stock.prices")

#getting prices for the Global X MSCI Pakistan ETF
pak_prices <- tq_get("PAK", get = "stock.prices")

view(eza_prices)
view(ews_prices) 
view(ewi_prices)
view(qat_prices)
view(uae_prices)
view(pak_prices)



```

```{r}
#|: quandl-demo
# supports both time-series data and data tables
# pkg docs: https://cran.r-project.org/web/packages/Quandl/Quandl.pdf

# getting data for AAPL (Apple) ticker
appl_quandl <- Quandl('WIKI/AAPL')
view(appl_quandl)

# getting data for specific time frame
appl_limited_quandl = Quandl("WIKI/AAPL", start_date = "2015-01-01", end_date = "2022-12-31")
view(appl_limited_quandl)

#getting data for the NASDAQ Europe Index
neurope_data = Quandl("NASDAQOMX/NQEU") 
view(neurope_data)
```

```{r}
#|: alphavantager-demo
# supports downloading financial information from Alpha Vantage API
# pkg docs: https://cran.r-project.org/web/packages/alphavantager/alphavantager.pdf 

# uses unique alphavantager key to try to download international stock indices

#av_api_key("SC57WJD3FOM5GVYG")
#av_get(symbol     = "DAX",  #** NOT THE DAX after furhter research
       #av_fun     = "TIME_SERIES_DAILY",
       #outputsize = "full")
#av_get(symbol     = "STI", #** NOT THE STI after furhter research
       #av_fun     = "TIME_SERIES_DAILY",
       #outputsize = "full")
#av_get(symbol     = "CHI",  #** NOT THE CAC 40 after furhter research
       #av_fun     = "TIME_SERIES_DAILY",
       #outputsize = "full")
```

```{r}
#|: alphavantager-demo-1 (cot'd)
# from Garrett
# More indice data (continued from above)

# av_api_key("SC57WJD3FOM5GVYG")
#av_get(symbol     = "GSP",  #** NOT THE S&P after furhter research
       #av_fun     = "TIME_SERIES_DAILY",
       #outputsize = "compact")

# av_get(symbol     = "TSE", #Tried TEPIX, TSE, both work but not the correct index
#        av_fun     = "TIME_SERIES_DAILY",
#        outputsize = "full") |> view()
```

```{r}
#|: alphavantager-demo-1 (cot'd)
# from Garrett
# using search function

#Alphavantager ticker search: URL below uses keywords and unique API key to list ETF, mutual fund, and equity symbols to use in alphavantager package. Conclusion after using search function: international stock index data not available in package.  

# https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=FILLHERE&apikey=FILLHERE 
```

```{r}
#|: alphavantager-demo-2
# from Jayson
# Example: fetching USD/RUB exchange rate data

#av_api_key("AKODC2XAAZIFHH9J")
#symbol <- "USD/RUB"
#forex_data <- av_get(symbol, av_fun = "FX_DAILY", outputsize = "compact")
#head(forex_data) # xts object
```
